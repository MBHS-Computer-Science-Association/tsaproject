<html ng-app="projectApp">

	<head>
		<meta charset="utf-8" />
    	<title>Jambo</title>

    <!-- Socket.IO CDN -->
    <script src="lib/socket.io.min.js"></script>

    <!-- jQuery CDN -->
    <script src="lib/jquery-3.1.1.min.js"></script>

    <!-- Semantic UI CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.4/semantic.min.css" integrity="sha256-BQwSEeLxuDggfePeFdo3V906rcvcJpkSAYr/Lqc2oSo="
      crossorigin="anonymous" />
    <script type="text/javascript" src="lib/semantic.min.js"></script>

    <!-- AngularJS CDN -->
    <script src="lib/angular.min.js"></script>

    <!-- All of our code -->
    <script src="scripts/main.js"></script>


    	<script>


		//Function for the setting popup
    	$( document ).ready(function() {
				// admin = user.isAdmin;
				if(true){
				  $("#settings").append('<a class="item"><form><input id="createTab" class = "ui container" type ="text" style="width:100px"><input id="createTabB" type="button" autocomplete="off" value="AddTab"></input></form></a>');
				}
				$("#createTabB").click(function(){
				  addTab();
				});
				$("#nicknamesub").click(function(){
					changeNickname($("#NicknameField").val());
			    $("#NicknameField").val('');
			  });
				$('.menu .browse').popup({
							inline     : false,
							hoverable  : true,
							position   : 'top right',
							delay: {
								show: 300,
								hide: 800
			}});
			  });

    	// Tabbing function
			$( document ).ready(function() {
    	$('.menu .item')
  		.tab();
  		});
			$( document ).ready(function() {
			  $('#menu .item').on('click', function() {
			  	$('#menu .item').removeClass('online');
			  	$(this).addClass('online');
			  	});
			  	});
				//SendingMessages
			  $(document).ready(function() {
			    $('#inputsub').click(function() {
						// user, group, message (string)
						// We don't have a way to get the user or the group yet.
			      var content = $('#inputtext').val();
			      var agroup = $('#menu .active').attr("data-tab").substring(4);
			      console.log(content);
						console.log(agroup);
			      sendMessage(agroup,content);
			      $('#inputtext').val('');
			    });
			  });
				//Themeing
			  $(document).ready(function(){
			    // $("#ChangeTheme").click(function(){
			      $("input:radio[name=ColorTheme]").click(function() {
			        var value = $(this).val();
			        console.log(value);
			        if(value=="Light"){
			          // $("#a").attr("class","ui bottom attached left aligned purple segment");
			          $("#a").append("class","")
			        }
			        if(value=="Dark"){
			          // $("#a").attr("class","ui bottom attached padded raied left alighned inverted grey segment");
			        }
			      });

			  });
			// Grab the users from the server after document loads
			$( document ).ready(function() {
				// Query server for users online and offline
				// 	also updates AngularJS model
				getUsers();
			});
		</script>

	</head>

	<body style="margin-left:1vw;">

	<!-- Title -->
	<h1>Jambo v.0.0.1</h1>
	<div class="ui purple vertical segment">
		<h5>The one stop event app!</h5>
	</div>
		<div id="tabbingwut"class = "ui raised purple center aligned top attached">


		<!-- Tab menu for seperating the discussions -->
			<div id="menu"class="ui top attached tabular menu" style="float:left; width:80vw;">
  				<a class="active item" data-tab="tab-1">Discussion</a>
 				<a class="item" data-tab="tab-2">Moderator Chat</a>
			</div>
				<!-- Tab 1 - Discussion -->
				<div class="ui attached tab active segment" data-tab="tab-1" style="overflow-y: scroll; height: 70vh ; float:left; width:80vw;">
  					<div id="tab-1-spot" class="ui bottom attached left aligned purple segment"></div>
				</div>
				<!-- Tab 2 - Discussion -->
				<div class="ui attached tab segment" data-tab="tab-2" style="overflow-y: scroll; height: 70vh ; float:left; width:80vw;">
  					<div id="tab-2-spot" class="ui bottom attached left aligned purple segment"></div>
				</div>
		</div>
		<!-- Message Bar -->
		<div class="ui icon attached input focus" style="position: fixed; bottom: 7vh; right: 39vw; width: 60vw; height: 5vh">
			<input id="inputtext" type="text" placeholder="Type a message here...">
			<i class="comment icon"></i>
		</div>

		<!-- Send Button -->
		<button id="inputsub" class ="ui purple button" style="position: fixed; bottom: 7vh; right: 28.5vw; width: 10vw; height: 5vh">
			Send
		</button>

		<!-- User List -->
		<div id="userList" class="ui right attached divided list" style="float:right; width:17.45vw;" ng-controller="usersCtrl">
			Users:
			<div class="item" ng-repeat="user in users">
				<i ng-class="getUserColor(user)" class="circle icon"></i>
				<div class="content">
					<a class="header">{{user.nick}}</a>
				</div>
			</div>
		</div>

		<!-- Settings popup -->
		<div class="ui menu" style="position: fixed;top: auto; left: auto; bottom: 0; right: 0; width: auto;">
        <a class="browse item">
          <i class="settings icon"></i>
        </a>
        <div class="ui fluid popup top right transition hidden">
          <div class="ui one column relaxed divided grid">
            <div class="column">
              <h4 class="ui header">Settings</h4>
              <div id="settings" class="ui link list">
                <a class="item">
									<form>
							  		<input id="NicknameField" class = "ui container" type ="text" style="width:100px">
							  		<input id="nicknamesub" type="button" autocomplete="off" value="NickName"></input>
									</form>
								</a>
								<div class="inline fields">
						      <div class="field">
						        <div class="ui radio checkbox">
						          <input type="radio" name="ColorTheme" value="Light"checked="checked">
						          <label>Light</label>
						        </div>
						      </div>
						      <div class="field">
						        <div class="ui radio checkbox">
						          <input type="radio" name="ColorTheme" value="Dark">
						          <label>Dark</label>
						        </div>
						      </div>
						  </div>
                <!-- <a class="item">Option x</a> -->
                <!-- <a class="item">Option y</a> -->
                <!-- <a class="item">OPtion z</a> -->
              </div>
            </div>
          </div>
        </div>
	</div>
	</body>
</html>
